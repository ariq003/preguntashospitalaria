<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PAF - Pr√°ctica Examen (Aleatorizado)</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        .header { background: white; border-radius: 16px; padding: 24px; margin-bottom: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.1); }
        .header h1 { color: #48bb78; font-size: 28px; margin-bottom: 8px; }
        .stats { display: flex; gap: 12px; margin-top: 16px; flex-wrap: wrap; }
        .stat { background: #f0fff4; padding: 12px 16px; border-radius: 8px; font-size: 14px; flex: 1; min-width: 100px; text-align: center; }
        .stat strong { color: #48bb78; font-size: 20px; display: block; }
        .card { background: white; border-radius: 16px; padding: 32px; box-shadow: 0 8px 32px rgba(0,0,0,0.1); }
        .question-number { color: #48bb78; font-weight: 600; font-size: 14px; margin-bottom: 16px; }
        .question-text { font-size: 18px; line-height: 1.6; color: #2d3748; margin-bottom: 24px; font-weight: 500; }
        .options { display: flex; flex-direction: column; gap: 12px; }
        .option { padding: 16px; border: 2px solid #e2e8f0; border-radius: 12px; cursor: pointer; transition: all 0.2s; font-size: 16px; }
        .option:hover:not(.disabled) { border-color: #48bb78; background: #f0fff4; }
        .option.selected { border-color: #48bb78; background: #f0fff4; }
        .option.correct { border-color: #48bb78; background: #f0fff4; font-weight: bold; }
        .option.incorrect { border-color: #f56565; background: #fff5f5; }
        .option-label { font-weight: 600; margin-right: 8px; color: #48bb78; }
        .buttons { display: flex; gap: 12px; margin-top: 24px; }
        button { padding: 14px 28px; border: none; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.2s; flex: 1; }
        .btn-primary { background: #48bb78; color: white; }
        .btn-primary:disabled { background: #cbd5e0; cursor: not-allowed; }
        .feedback { margin-top: 20px; padding: 16px; border-radius: 12px; font-size: 15px; }
        .feedback.correct { background: #f0fff4; border: 2px solid #48bb78; color: #22543d; }
        .feedback.incorrect { background: #fff5f5; border: 2px solid #f56565; color: #742a2a; }
        .progress-bar { height: 8px; background: #e2e8f0; border-radius: 4px; overflow: hidden; margin-top: 16px; }
        .progress-fill { height: 100%; background: #48bb78; transition: width 0.3s ease; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const rawQuestions = [
            { question: "1. La PAF se basa principalmente en:", options: ["Cognitivismo", "Psicoan√°lisis", "Conductismo radical y an√°lisis funcional", "Humanismo"], correctText: "Conductismo radical y an√°lisis funcional" },
            { question: "2. El foco principal de la PAF est√° en:", options: ["Historia pasada", "Cogniciones", "Conductas que ocurren en sesi√≥n", "S√≠ntomas"], correctText: "Conductas que ocurren en sesi√≥n" },
            { question: "3. Las conductas cl√≠nicamente relevantes (CRB) son aquellas que:", options: ["Ocurren fuera de sesi√≥n", "Son narradas por el paciente", "Se emiten dentro de la relaci√≥n terap√©utica", "Son inconscientes"], correctText: "Se emiten dentro de la relaci√≥n terap√©utica" },
            { question: "4. Una CRB1 corresponde a:", options: ["Conducta adaptativa en sesi√≥n", "Conducta pasada", "Conducta problem√°tica emitida en sesi√≥n", "Conducta fuera de sesi√≥n"], correctText: "Conducta problem√°tica emitida en sesi√≥n" },
            { question: "5. Una CRB2 es:", options: ["Reca√≠da", "Conducta evitativa", "Mejor√≠a conductual en sesi√≥n", "Conducta gobernada por reglas"], correctText: "Mejor√≠a conductual en sesi√≥n" },
            { question: "6. Una CRB3 implica:", options: ["Conducta emocional", "Insight cognitivo", "Interpretaci√≥n funcional del propio comportamiento", "Recuerdo autobiogr√°fico"], correctText: "Interpretaci√≥n funcional del propio comportamiento" },
            { question: "7. El rol del terapeuta en PAF es:", options: ["Neutral", "Interpretativo", "Activo, aut√©ntico y reforzante", "Directivo r√≠gido"], correctText: "Activo, aut√©ntico y reforzante" },
            { question: "8. El reforzamiento en PAF debe ser:", options: ["Programado", "Artificial", "Natural y contingente", "Diferido"], correctText: "Natural y contingente" },
            { question: "9. La equivalencia funcional entre contextos significa que:", options: ["Las conductas son id√©nticas", "El ambiente es el mismo", "La funci√≥n de la conducta se mantiene en distintos contextos", "El terapeuta controla el entorno"], correctText: "La funci√≥n de la conducta se mantiene en distintos contextos" },
            { question: "10. El objetivo del reforzamiento de CRB2 es:", options: ["Eliminar emociones", "Aumentar insight", "Generalizar conductas adaptativas", "Reducir s√≠ntomas"], correctText: "Generalizar conductas adaptativas" },
            { question: "11. En PAF, una cognici√≥n se entiende como:", options: ["Esquema mental", "Est√≠mulo externo", "Respuesta emocional", "Conducta verbal privada"], correctText: "Conducta verbal privada" },
            { question: "12. El an√°lisis funcional en PAF se centra en:", options: ["Topograf√≠a", "Diagn√≥stico", "Funci√≥n de la conducta", "Contenido verbal"], correctText: "Funci√≥n de la conducta" },
            { question: "13. El modelo A-B-C revisado enfatiza que:", options: ["La conducta depende del pensamiento", "La emoci√≥n antecede a la conducta", "La conducta puede ocurrir sin mediaci√≥n cognitiva", "Siempre hay reglas"], correctText: "La conducta puede ocurrir sin mediaci√≥n cognitiva" },
            { question: "14. Una conducta moldeada por contingencias es aquella que:", options: ["Sigue reglas verbales", "Es planificada", "Depende de historia de reforzamiento", "Es racional"], correctText: "Depende de historia de reforzamiento" },
            { question: "15. La conducta gobernada por reglas se caracteriza por:", options: ["Ser emocional", "Estar mediada por verbalizaciones", "Ser autom√°tica", "No tener consecuencias"], correctText: "Estar mediada por verbalizaciones" },
            { question: "16. En PAF, el terapeuta utiliza su respuesta emocional para:", options: ["Interpretar", "Controlar la sesi√≥n", "Informar el an√°lisis funcional", "Evitar implicaci√≥n"], correctText: "Informar el an√°lisis funcional" },
            { question: "17. La relaci√≥n terap√©utica es considerada:", options: ["Neutral", "T√©cnica", "Un contexto de aprendizaje", "Secundaria"], correctText: "Un contexto de aprendizaje" },
            { question: "18. La generalizaci√≥n ocurre cuando:", options: ["El paciente comprende", "Se reduce el s√≠ntoma", "La conducta adaptativa aparece fuera de sesi√≥n", "Se analiza el pasado"], correctText: "La conducta adaptativa aparece fuera de sesi√≥n" },
            { question: "19. En PAF, la aut√©nticidad del terapeuta es importante porque:", options: ["Aumenta empat√≠a", "Facilita insight", "Funciona como est√≠mulo natural", "Reduce resistencia"], correctText: "Funciona como est√≠mulo natural" },
            { question: "20. La funci√≥n de una conducta se define por:", options: ["Su forma", "Su intensidad", "Sus consecuencias", "Su frecuencia"], correctText: "Sus consecuencias" },
            { question: "21. La evitaci√≥n experiencial en PAF se observa cuando:", options: ["El paciente calla", "Evita temas", "Escapa de contingencias interpersonales", "Presenta ansiedad"], correctText: "Escapa de contingencias interpersonales" },
            { question: "22. El castigo en PAF se evita porque:", options: ["Es poco √©tico", "No es conductual", "Da√±a la relaci√≥n terap√©utica", "Reduce generalizaci√≥n"], correctText: "Da√±a la relaci√≥n terap√©utica" },
            { question: "23. La PAF prioriza:", options: ["T√©cnicas estructuradas", "Psicoeducaci√≥n", "Interacci√≥n en vivo", "Diagn√≥stico"], correctText: "Interacci√≥n en vivo" },
            { question: "24. El cambio terap√©utico ocurre cuando:", options: ["El paciente entiende", "Disminuyen s√≠ntomas", "Se modifican funciones conductuales", "Cambian cogniciones"], correctText: "Se modifican funciones conductuales" },
            { question: "25. Una CRB relevante debe ser:", options: ["Frecuente", "Emocional", "Funcionalmente similar al problema externo", "Narrada"], correctText: "Funcionalmente similar al problema externo" },
            { question: "26. El terapeuta refuerza CRB2 principalmente mediante:", options: ["Interpretaciones", "T√©cnicas cognitivas", "Consecuencias interpersonales naturales", "Psicoeducaci√≥n"], correctText: "Consecuencias interpersonales naturales" },
            { question: "27. En PAF, la sesi√≥n es vista como:", options: ["Espacio de an√°lisis", "Lugar seguro", "Laboratorio conductual", "Contexto simb√≥lico"], correctText: "Laboratorio conductual" },
            { question: "28. El an√°lisis funcional sustituye a:", options: ["Diagn√≥stico DSM", "Entrevista", "Explicaciones topogr√°ficas", "Evaluaci√≥n cl√≠nica"], correctText: "Diagn√≥stico DSM" },
            { question: "29. La mejora cl√≠nica se define por:", options: ["Bienestar subjetivo", "Insight", "Cambio conductual generalizado", "Reducci√≥n emocional"], correctText: "Cambio conductual generalizado" },
            { question: "30. La PAF pertenece a:", options: ["Segunda ola", "Humanismo", "Psicoan√°lisis", "Tercera ola conductual"], correctText: "Tercera ola conductual" }
        ];

        function App() {
            const [cur, setCur] = useState(0);
            const [shuffledOptions, setShuffledOptions] = useState([]);
            const [sel, setSel] = useState(null);
            const [res, setRes] = useState(false);
            const [pts, setPts] = useState(0);

            const q = rawQuestions[cur];

            useEffect(() => {
                if (cur < rawQuestions.length) {
                    const options = [...rawQuestions[cur].options];
                    for (let i = options.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [options[i], options[j]] = [options[j], options[i]];
                    }
                    setShuffledOptions(options);
                }
            }, [cur]);

            const check = () => {
                if (shuffledOptions[sel] === q.correctText) setPts(pts + 1);
                setRes(true);
            };

            const next = () => { setCur(cur + 1); setSel(null); setRes(false); };

            if (cur >= rawQuestions.length) {
                return (
                    <div className="container">
                        <div className="card" style={{textAlign:'center'}}>
                            <h1>üéâ ¬°Cuestionario Completado!</h1>
                            <p style={{fontSize: '24px', margin: '20px 0'}}>Resultado: {pts} / {rawQuestions.length}</p>
                            <button className="btn-primary" onClick={() => window.location.reload()}>Reiniciar</button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="container">
                    <div className="header">
                        <h1>Psicoterapia Anal√≠tico-Funcional</h1>
                        <div className="stats">
                            <div className="stat"><strong>{pts}</strong>Aciertos</div>
                            <div className="stat"><strong>{rawQuestions.length}</strong>Total</div>
                        </div>
                        <div className="progress-bar"><div className="progress-fill" style={{width: `${((cur+1)/rawQuestions.length)*100}%`}}></div></div>
                    </div>
                    <div className="card">
                        <div className="question-number">Pregunta {cur + 1} de {rawQuestions.length}</div>
                        <div className="question-text">{q.question}</div>
                        <div className="options">
                            {shuffledOptions.map((o, i) => {
                                let cName = "option";
                                if (sel === i) cName += " selected";
                                if (res && o === q.correctText) cName += " correct";
                                if (res && sel === i && o !== q.correctText) cName += " incorrect";
                                if (res) cName += " disabled";
                                return <div key={i} className={cName} onClick={() => !res && setSel(i)}>
                                    <span className="option-label">{String.fromCharCode(97+i)})</span>{o}
                                </div>
                            })}
                        </div>
                        {res && (
                            <div className={`feedback ${shuffledOptions[sel] === q.correctText ? 'correct' : 'incorrect'}`}>
                                {shuffledOptions[sel] === q.correctText ? "‚úÖ ¬°Muy bien! Reforzando CRB2." : `‚ùå Incorrecto. La respuesta era: ${q.correctText}`}
                            </div>
                        )}
                        <div className="buttons">
                            {!res ? <button className="btn-primary" onClick={check} disabled={sel===null}>Verificar</button> 
                                  : <button className="btn-primary" onClick={next}>Siguiente ‚Üí</button>}
                        </div>
                    </div>
                </div>
            );
        }
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
